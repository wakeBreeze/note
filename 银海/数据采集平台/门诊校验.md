疑问字段

![image-20211124171134267](F:\编程学习\笔记\Typora\typoraNeed\Typora\typora-user-images\image-20211124171134267.png)



cec2:bked78 -> cec3:bked82

cec4:bked79



#### 新建表

#### kbe3门诊数据采集批次记录表

kbe3序列：

```sql
-- kbe3
select * from user_sequences
where sequence_name = 'SE_AAZ848'

-- 创建keu6表序列
create sequence SE_AAZ848 
minvalue 3213000000000001 
MAXVALUE 3213999999999999 
START with 3213000000000001 
INCREMENT by 1 CACHE 20;
```



kbe3表：

```sql
-- Create table
create table KBE3
(
  aaz848 NUMBER(16) not null,
  mzz506 NUMBER(20) not null,
  bked93 VARCHAR2(30) not null,
  bke874 VARCHAR2(3) not null,
  bke139 VARCHAR2(30) not null,
  bke708 NUMBER(8),
  bke709 VARCHAR2(2),
  bke710 NUMBER(8),
  bke711 NUMBER(8),
  bke712 DATE,
  bke713 VARCHAR2(6),
  aae011 VARCHAR2(20),
  aae036 DATE,
  bke714 DATE,
  akb020 VARCHAR2(20) not null,
  baa001 VARCHAR2(20) not null,
  aaa027 VARCHAR2(20) not null,
  aaa131 VARCHAR2(6) not null,
  bkee59 CLOB
)
tablespace DATA
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Add comments to the table 
comment on table KBE3
  is '门诊数据采集批次记录表';
-- Add comments to the columns 
comment on column KBE3.aaz848
  is '数据采集校验结果汇总表ID';
comment on column KBE3.mzz506
  is '门诊上报ID';
comment on column KBE3.bked93
  is '门诊号';
comment on column KBE3.bke874
  is '数据来源(1文件上传，2接口上报)';
comment on column KBE3.bke139
  is '数据上报批次号';
comment on column KBE3.bke708
  is '病案总数';
comment on column KBE3.bke709
  is '校验标志';
comment on column KBE3.bke710
  is '校验通过数';
comment on column KBE3.bke711
  is '校验未通过数';
comment on column KBE3.bke712
  is '校验时间';
comment on column KBE3.bke713
  is '确认状态';
comment on column KBE3.aae011
  is '经办人';
comment on column KBE3.aae036
  is '经办时间';
comment on column KBE3.bke714
  is '解析时间';
comment on column KBE3.akb020
  is '医疗服务机构编码';
comment on column KBE3.baa001
  is '分中心';
comment on column KBE3.aaa027
  is '统筹区';
comment on column KBE3.aaa131
  is '撤销标志';
comment on column KBE3.bkee59
  is '校验错误日志';
-- Create/Recreate indexes 
create unique index IDX_BKE139_MZZ506 on KBE3 (BKE139, MZZ506)
  tablespace DATA
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table KBE3
  add constraint PK_KBE3 primary key (AAZ848)
  using index 
  tablespace DATA
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );

```



#### kbe4门诊病案首页质量扣分明细表

kes6序列：

```sql
-- 创建kes6表序列
create sequence SE_AAZ829 
minvalue 3213000000000001 
MAXVALUE 3213999999999999 
START with 3213000000000001 
INCREMENT by 1 CACHE 20;
```

kes6表

```sql
-- 扣分
-- akb020 -- 医疗机构编码扣分
-- akb021 -- 医疗机构名称扣分
-- bked93 -- 门诊号扣分
bkef58 -- 姓名扣分
bkec77 -- 性别扣分
bkec79 -- 年龄扣分
bkef59 -- 就诊日期扣分
	bkec92 -- 主要疾病编码扣分
	bkec94 -- 其他疾病编码扣分
bkec80 -- 医疗付款方式扣分
bkec85 -- 实际在院天数扣分
bked10 -- 总费用扣分
bkef60 -- 门诊检验信息扣分（cec2 -> bkef60）
bkef61 -- 门诊检验明细信息扣分（cec3 -> bkef61）
bkef62 -- 门诊诊断结果扣分（cec4 -> bkef62）

```

kbe4表结构

```sql
create table KBE4
(
  aaz829 NUMBER(16) not null,
  mzz506 NUMBER(16) not null,
  bked93 VARCHAR2(30) not null,
  akb020 VARCHAR2(20),
  bked12 NUMBER(5,2),
  bkef58 NUMBER(5,2),
  bkec77 NUMBER(5,2),
  bkec79 NUMBER(5,2),
  bkef59 NUMBER(5,2),
  bkec92 NUMBER(5,2),
  bkec94 NUMBER(5,2),
  bkec80 NUMBER(5,2),
  bkec85 NUMBER(5,2),
  bked10 NUMBER(5,2),
  bkef60 NUMBER(5,2),
  bkef61 NUMBER(5,2),
  bkef62 NUMBER(5,2),
  bked13 NVARCHAR2(2000),
  bke139 VARCHAR2(30) not null,
  aae036 DATE not null,
  aaa131 VARCHAR2(6) not null
)
tablespace DATA
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Add comments to the table 
comment on table KBE4
  is 'KBE4(门诊病案首页质量扣分明细表)';
-- Add comments to the columns 
comment on column KBE4.aaz829
  is '门诊病案首页质量扣分明细ID';
comment on column KBE4.mzz506
  is '门诊上报ID';
comment on column KBE4.bked93
  is '门诊号';
comment on column KBE4.akb020
  is '医疗服务机构编号';
comment on column KBE4.bked12
  is '病案总得分';
comment on column KBE4.bkef58
  is '姓名扣分';
comment on column KBE4.bkec77
  is '性别扣分';
comment on column KBE4.bkec79
  is '年龄扣分';
comment on column KBE4.bkef59
  is '就诊日期扣分';
comment on column KBE4.bkec92
  is '主要疾病编码扣分';
comment on column KBE4.bkec94
  is '其他疾病编码扣分';
comment on column KBE4.bkec80
  is '医疗付款方式扣分';
comment on column KBE4.bkec85
  is '实际在院天数扣分';
comment on column KBE4.bked10
  is '总费用扣分';
comment on column KBE4.bkef60
  is '门诊检验信息扣分';
comment on column KBE4.bkef61
  is '门诊检验明细信息扣分';
comment on column KBE4.bkef62
  is '门诊诊断结果扣分';
comment on column KBE4.bked13
  is '扣分原因';
comment on column KBE4.bke139
  is '校验批次号';
comment on column KBE4.aae036
  is '经办时间';
comment on column KBE4.aaa131
  is '撤销标志';
-- Create/Recreate primary, unique and foreign key constraints 
alter table KBE4
  add constraint PK_KBE4 primary key (AAZ829)
  using index 
  tablespace DATA
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
```



#### kbe5门诊病案首页前置校验错误日志表



```sql
-- kbe5
select * from user_sequences
where sequence_name = 'SE_AAZ878'

-- 创建kbe5表序列
create sequence SE_AAZ878 
minvalue 3213000000000001 
MAXVALUE 3213999999999999 
START with 3213000000000001 
INCREMENT by 1 CACHE 20;
```

kbe5表：

```sql
-- Create table
create table KBE5
(
  aaz878 NUMBER(16) not null,
  mzz506 NUMBER(16) not null,
  akb020 VARCHAR2(20),
  bae003 VARCHAR2(6),
  bae188 VARCHAR2(2000),
  bke139 VARCHAR2(30),
  aae036 DATE,
  baa001 VARCHAR2(6) not null,
  aaa027 VARCHAR2(6) not null,
  aaa131 VARCHAR2(6) not null
)
tablespace SICP_DATA
  pctfree 10
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Add comments to the table 
comment on table KBE5
  is '门诊病案首页前置校验错误日志表';
-- Add comments to the columns 
comment on column KBE5.aaz878
  is '门诊病案首页前置校验错误日志ID';
comment on column KBE5.mzz506
  is '门诊上报ID';
comment on column KBE5.akb020
  is '医疗服务机构编号';
comment on column KBE5.bae003
  is '错误类型';
comment on column KBE5.bae188
  is '错误描述';
comment on column KBE5.bke139
  is '校验批次号';
comment on column KBE5.aae036
  is '经办时间';
comment on column KBE5.baa001
  is '分中心';
comment on column KBE5.aaa027
  is '统筹区';
comment on column KBE5.aaa131
  is '数据撤销标志';

```





数据库异地备份
